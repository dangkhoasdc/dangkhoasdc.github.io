<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.50" />
  <meta name="author" content="Dang-Khoa">
  <meta name="description" content="Research Assistant">

  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="/css/highlight.min.css">
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather%7CRoboto+Mono">
  <link rel="stylesheet" href="/css/hugo-academic.css">
  
  <link rel="stylesheet" href="/css/custom-theme.css">
  

  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-2381283-3', 'auto');
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  

  <link rel="alternate" href="" type="application/rss+xml" title="Dang-Khoa&#39;s blog ">
  <link rel="feed" href="" type="application/rss+xml" title="Dang-Khoa&#39;s blog ">

  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/apple-touch-icon.png">

  <link rel="canonical" href="http://dangkhoasdc.github.io/vi/post/opencv_android_studio_ndk/">

  

  <title>Cài đặt OpenCV trên Android Studio hỗ trợ lập trình NDK | Dang-Khoa&#39;s blog </title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Chuyển Điều Hướng</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/vi/">Dang-Khoa&#39;s blog </a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="/vi/#posts">
            
            <span>Posts</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/vi/#about">
            
            <span>Home</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/vi/#projects">
            
            <span>Projects</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/vi/#publications_selected">
            
            <span>Publications</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/vi/about/">
            
            <span>About</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/vi/tags/notes/">
            
            <span>Notes</span>
          </a>
        </li>

        
        

        
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true">
            <i class="fa fa-globe" aria-hidden="true"></i>
            <span>Tiếng Việt</span>
          </a>
          <ul class="dropdown-menu">
            
            <li class="nav-item">
              <a href="/post/opencv_android_studio_ndk/">
                <span>English</span>
              </a>
            </li>
            
          </ul>
        </li>
        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <h1 itemprop="name">Cài đặt OpenCV trên Android Studio hỗ trợ lập trình NDK</h1>
    

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2018-02-25 00:00:00 &#43;0000 UTC" itemprop="datePublished">
      2018-02-25
    </time>
  </span>

  

  
  
  
  <span class="article-tags">
    <i class="fa fa-tags"></i>
    
    <a href="/vi/tags/android">android</a
    >, 
    
    <a href="/vi/tags/opencv">opencv</a
    >, 
    
    <a href="/vi/tags/programming">programming</a
    >
    
  </span>
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=http%3a%2f%2fdangkhoasdc.github.io%2fvi%2fpost%2fopencv_android_studio_ndk%2f"
         target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=C%c3%a0i%20%c4%91%e1%ba%b7t%20OpenCV%20tr%c3%aan%20Android%20Studio%20h%e1%bb%97%20tr%e1%bb%a3%20l%e1%ba%adp%20tr%c3%acnh%20NDK&amp;url=http%3a%2f%2fdangkhoasdc.github.io%2fvi%2fpost%2fopencv_android_studio_ndk%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2fdangkhoasdc.github.io%2fvi%2fpost%2fopencv_android_studio_ndk%2f&amp;title=C%c3%a0i%20%c4%91%e1%ba%b7t%20OpenCV%20tr%c3%aan%20Android%20Studio%20h%e1%bb%97%20tr%e1%bb%a3%20l%e1%ba%adp%20tr%c3%acnh%20NDK"
         target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    
    
    
    
    
    
    
    <li>
      <a class="email"
         href="mailto:?subject=C%c3%a0i%20%c4%91%e1%ba%b7t%20OpenCV%20tr%c3%aan%20Android%20Studio%20h%e1%bb%97%20tr%e1%bb%a3%20l%e1%ba%adp%20tr%c3%acnh%20NDK&amp;body=http%3a%2f%2fdangkhoasdc.github.io%2fvi%2fpost%2fopencv_android_studio_ndk%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

    <div class="article-style" itemprop="articleBody">
      

<p>Trong bài viết này, mình sẽ trình bày cách cấu hình thư viện OpenCV với IDE
Android Studio phiên bản mới nhất (3.0.1). Phiên bản được biên dịch sẵn có
hỗ trợ Android được cung cấp sẵn ở <a href="https://opencv.org/releases.html" target="_blank">OpenCV Homepage</a>.
Tải và extract thư viện. Đồng thời, để có thể debug trên thiết bị thực thì
điện thoại phải cài đặt ứng dụng <a href="https://play.google.com/store/apps/details?id=org.opencv.engine&amp;hl=en" target="_blank">OpenCV Manager</a>.</p>

<p>Trong bài viết khác, mình sẽ hướng dẫn cách biên dịch phiên bản OpenCV với
các tùy chỉnh của riêng cho từng yêu cầu, ví dụ như sử dụng đặc trưng SIFT hoặc
các thuật toán có bản quyền.</p>

<h2 id="tạo-ứng-dụng-android-với-hỗ-trợ-ndk">Tạo ứng dụng Android với hỗ trợ NDK</h2>

<p>Trong menu, <code>File-&gt;New-&gt;New Project</code>, và chọn <code>Include C++ support</code> trong cửa
sổ <code>Create New Project</code>.</p>

<figure>
    <img src="https://i.imgur.com/vgMNEYg.png"/> <figcaption>
            <h4>Step 1</h4>
        </figcaption>
</figure>


<p>Hai bước tiếp theo tương tự như cấu hình ứng dụng thông thường, nên mình sẽ bỏ
qua phần này. Sau đó, IDE sẽ hỏi cấu hình C++ cho ứng dụng, thoe mình thì nên
chọn C++14 và 2 tùy chọn Exception Support và  Runtime Type
Information Support.</p>

<ol>
<li><p>Từ cửa sổ Project Structure (<code>File -&gt; Project Structure</code>), ta thêm OpenCV module
bằng cách click vào dấu <code>+</code>, chọn <code>Import Eclipse ADT Project</code>
và trỏ đến thư mục <code>/path/to/OpenCV4Android/sdk/java</code>.</p></li>

<li><p>Chọn <code>Modules -&gt; app</code>.  Trong tab <code>Dependencies</code> , thêm OpenCV module
bằng cách nhấn vào dấu <code>+</code></p>

<ol>
<li><code>Module Dependency</code>.</li>
<li>Chọn <code>:openCVLibrary340</code>.</li>
</ol></li>
</ol>

<figure>
    <img src="https://i.imgur.com/CSHlsF7.png"/> <figcaption>
            <h4>Add openCVLibrary340</h4>
        </figcaption>
</figure>


<h2 id="cấu-hình-cmake-và-ndk">Cấu hình CMAKE và NDK</h2>

<p>Để CMAKE có thể nhận ra được OpenCV, ta thêm đoạn code sau vào trong <code>CMakeLists.txt</code></p>

<ol>
<li>Thêm thư viện:</li>
</ol>

<pre><code>include_directories(/path/to/OpenCV4Android/sdk/native/jni/include)
add_library( lib_opencv SHARED IMPORTED )
set_target_properties(lib_opencv PROPERTIES IMPORTED_LOCATION /path/to/OpenCV4Android/sdk/native/libs/${ANDROID_ABI}/libopencv_java3.so)
</code></pre>

<ol>
<li>Thêm <code>lib_opencv</code> vào tham số của <code>target_link_libraries</code> ( câu lệnh cuối cùng
trong <code>CMakeLists.txt</code>).</li>
</ol>

<p>Lưu ý rằng Cmake sử dụng <code>/</code> cho đường dẫn trong cả Windows và Linux.</p>

<h2 id="cấu-hình-gradle">Cấu hình Gradle</h2>

<ol>
<li><p>Thêm <code>abiFilters 'x86', 'x86_64', 'armeabi', 'armeabi-v7a', 'arm64-v8a', 'mips', 'mips64'</code>
vào <code>cmake</code>.</p></li>

<li><p>Đặt đoạn code sau vào bên trong phần <code>android</code>:</p></li>
</ol>

<pre><code>sourceSets {
    main {
        jni.srcDirs = ['src/main/cpp']
        jniLibs.srcDirs = ['\path\to\OpenCV-android-sdk\\sdk\\native\\libs']
    }

}
</code></pre>

<p>Build lại ứng dụng và coi như ta đã config xong. Trong các bài viết tới, mình
sẽ giới thiệu một số kỹ thuật OpenCV với Android:</p>

<ul>
<li>Trao đổi đối tượng Mat giữa Java và NDK.</li>
<li>Tổ chức dự án và mã nguồn.</li>
</ul>

    </div>
  </div>

</article>

<div class="container">
  <nav>
  <ul class="pager">
    
    <li class="previous"><a href="http://dangkhoasdc.github.io/vi/post/story_telling_witcher3/"><span
      aria-hidden="true">&larr;</span> Witcher 3: xây dựng nhân vật và phương pháp phát triển cốt truyện</a></li>
    

    
    <li class="next"><a href="http://dangkhoasdc.github.io/vi/post/overfitting/">Overfitting là cái quái gì <span
      aria-hidden="true">&rarr;</span></a></li>
    
  </ul>
</nav>

</div>

<div class="article-container">
  
<section id="comments">
  <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "httpdangkhoasdcgithubio" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2017 Dang-Khoa &middot; 

      Powered by the <a href="https://github.com/gcushen/hugo-academic" target="_blank">Academic
      theme</a> for <a href="http://gohugo.io" target="_blank">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha512-jGsMH83oKe9asCpkOVkBnUrDDTp8wl+adkB2D+//JtlxO4SrLoJdhbOysIFQJloQFD+C4Fl1rMsQZF76JjV0eQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.2/imagesloaded.pkgd.min.js" integrity="sha512-iHzEu7GbSc705hE2skyH6/AlTpOfBmkx7nUqTLGzPYR+C1tRaItbRlJ7hT/D3YQ9SV0fqLKzp4XY9wKulTBGTw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.1/TweenMax.min.js" integrity="sha512-Z5heTz36xTemt1TbtbfXtTq5lMfYnOkXM2/eWcTTiLU01+Sw4ku1i7vScDc8fWhrP2abz9GQzgKH5NGBLoYlAw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.1/plugins/ScrollToPlugin.min.js" integrity="sha512-CDeU7pRtkPX6XJtF/gcFWlEwyaX7mcAp5sO3VIu/ylsdR74wEw4wmBpD5yYTrmMAiAboi9thyBUr1vXRPA7t0Q==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      

      

      
    <script>
    $(document).ready(function() {
        $('pre>span.src,pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });
    </script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>



    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML" integrity="sha512-tOav5w1OjvsSJzePRtt2uQPFwBoHt1VZcUq8l8nm5284LEKE9FSJBQryzMBzHxY5P0zRdNqEcpLIRVYFNgu1jw==" crossorigin="anonymous"></script>
    

    

  </body>
</html>

