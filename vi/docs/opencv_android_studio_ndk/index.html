<!DOCTYPE html>
<html lang='vi'>

<head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='Trong bài viết này, mình sẽ trình bày cách cấu hình thư viện OpenCV với IDE Android Studio phiên bản mới nhất (3.0.1). Phiên bản được biên dịch sẵn có hỗ trợ Android được cung cấp sẵn ở OpenCV Homepage. Tải và extract thư viện. Đồng thời, để có thể debug trên thiết bị thực thì điện thoại phải cài đặt ứng dụng OpenCV Manager.
Trong bài viết khác, mình sẽ hướng dẫn cách biên dịch phiên bản OpenCV với các tùy chỉnh của riêng cho từng yêu cầu, ví dụ như sử dụng đặc trưng SIFT hoặc các thuật toán có bản quyền.'>
<meta name='theme-color' content='#ffcd00'>

<meta property='og:title' content='Cài đặt OpenCV trên Android Studio hỗ trợ lập trình NDK • Dang-Khoa'>
<meta property='og:description' content='Trong bài viết này, mình sẽ trình bày cách cấu hình thư viện OpenCV với IDE Android Studio phiên bản mới nhất (3.0.1). Phiên bản được biên dịch sẵn có hỗ trợ Android được cung cấp sẵn ở OpenCV Homepage. Tải và extract thư viện. Đồng thời, để có thể debug trên thiết bị thực thì điện thoại phải cài đặt ứng dụng OpenCV Manager.
Trong bài viết khác, mình sẽ hướng dẫn cách biên dịch phiên bản OpenCV với các tùy chỉnh của riêng cho từng yêu cầu, ví dụ như sử dụng đặc trưng SIFT hoặc các thuật toán có bản quyền.'>
<meta property='og:url' content='http://dangkhoasdc.github.io/vi/docs/opencv_android_studio_ndk/'>
<meta property='og:site_name' content='Dang-Khoa&#39;s blog '>
<meta property='og:type' content='article'><meta property='og:image' content='https://www.gravatar.com/avatar/ff98eba7ca4592a175b13bd623f28f0c?s=256'><meta property='article:author' content='https://facebook.com/dangkhoasdc'><meta property='article:section' content='Docs'><meta property='article:tag' content='android'><meta property='article:tag' content='opencv'><meta property='article:tag' content='programming'><meta property='article:published_time' content='2018-02-25T00:00:00Z'/><meta property='article:modified_time' content='2018-02-25T00:00:00Z'/><meta name='twitter:card' content='summary'><meta name='twitter:creator' content='@dksdc'>

<meta name="generator" content="Hugo 0.53" />

  <title>Cài đặt OpenCV trên Android Studio hỗ trợ lập trình NDK • Dang-Khoa</title>
  <link rel='canonical' href='http://dangkhoasdc.github.io/vi/docs/opencv_android_studio_ndk/'>
  
  <link rel='alternate' hreflang='vi' href='http://dangkhoasdc.github.io/vi/docs/opencv_android_studio_ndk/'><link rel='alternate' hreflang='en' href='http://dangkhoasdc.github.io/docs/opencv_android_studio_ndk/'><link rel='alternate' hreflang='x-default' href='http://dangkhoasdc.github.io/docs/opencv_android_studio_ndk/'>
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.809149b6.css'><style>
:root{--color-accent:#ffcd00;}
</style>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-2381283-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  

</head>


<body class='page type-docs'>

  <div class='site'>

    <a class='screen-reader-text' href='#content'>Skip to Content</a>

    <div class='main'>

      <nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    
    <ul><li class='item'>
        <a href='/vi/docs/' class="">
          <span>Docs</span>
        </a>
      </li><li class='item'>
        <a href='/vi/page/about/' class="">
          <span>dangkhoasdc</span>
        </a>
      </li><li class='item'>
        <a href='#posts' class="">
          <span>Posts</span>
        </a>
      </li><li class='item'>
        <a href='#about' class="">
          <span>Home</span>
        </a>
      </li><li class='item'>
        <a href='#projects' class="">
          <span>Projects</span>
        </a>
      </li><li class='item'>
        <a href='#publications_selected' class="">
          <span>Publications</span>
        </a>
      </li><li class='item'>
        <a href='/about/' class="">
          <span>About</span>
        </a>
      </li><li class='item'>
        <a href='/tags/notes/' class="">
          <span>Notes</span>
        </a>
      </li></ul>
  </div>
</nav>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>Dang-Khoa&#39;s blog </p><p class='desc site-desc'></p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='vi' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>Cài đặt OpenCV trên Android Studio hỗ trợ lập trình NDK</h1>
      

    </div>
    
<div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2018-02-25T00:00:00Z'>2018, Feb 25</time>
</span>

  <span class='byline'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M21,21V20c0-2.76-4-5-9-5s-9,2.24-9,5v1"/>
  <path d="M16,6.37A4,4,0,1,1,12.63,3,4,4,0,0,1,16,6.37Z"/>
  
</svg>
<span class='screen-reader-text'> by </span><a href='/vi/authors/khoa'>Dang-Khoa</a></span>
  

  
  
</div>


  </div>
</header>

  
  

  <div class='container entry-content'>
  

<p>Trong bài viết này, mình sẽ trình bày cách cấu hình thư viện OpenCV với IDE
Android Studio phiên bản mới nhất (3.0.1). Phiên bản được biên dịch sẵn có
hỗ trợ Android được cung cấp sẵn ở <a href="https://opencv.org/releases.html" target="_blank">OpenCV Homepage</a>.
Tải và extract thư viện. Đồng thời, để có thể debug trên thiết bị thực thì
điện thoại phải cài đặt ứng dụng <a href="https://play.google.com/store/apps/details?id=org.opencv.engine&amp;hl=en" target="_blank">OpenCV Manager</a>.</p>

<p>Trong bài viết khác, mình sẽ hướng dẫn cách biên dịch phiên bản OpenCV với
các tùy chỉnh của riêng cho từng yêu cầu, ví dụ như sử dụng đặc trưng SIFT hoặc
các thuật toán có bản quyền.</p>

<h2 id="tạo-ứng-dụng-android-với-hỗ-trợ-ndk">Tạo ứng dụng Android với hỗ trợ NDK</h2>

<p>Trong menu, <code>File-&gt;New-&gt;New Project</code>, và chọn <code>Include C++ support</code> trong cửa
sổ <code>Create New Project</code>.</p>

<figure>
    <img src="https://i.imgur.com/vgMNEYg.png"/> <figcaption>
            <h4>Step 1</h4>
        </figcaption>
</figure>


<p>Hai bước tiếp theo tương tự như cấu hình ứng dụng thông thường, nên mình sẽ bỏ
qua phần này. Sau đó, IDE sẽ hỏi cấu hình C++ cho ứng dụng, thoe mình thì nên
chọn C++14 và 2 tùy chọn Exception Support và  Runtime Type
Information Support.</p>

<ol>
<li><p>Từ cửa sổ Project Structure (<code>File -&gt; Project Structure</code>), ta thêm OpenCV module
bằng cách click vào dấu <code>+</code>, chọn <code>Import Eclipse ADT Project</code>
và trỏ đến thư mục <code>/path/to/OpenCV4Android/sdk/java</code>.</p></li>

<li><p>Chọn <code>Modules -&gt; app</code>.  Trong tab <code>Dependencies</code> , thêm OpenCV module
bằng cách nhấn vào dấu <code>+</code></p>

<ol>
<li><code>Module Dependency</code>.</li>
<li>Chọn <code>:openCVLibrary340</code>.</li>
</ol></li>
</ol>

<figure>
    <img src="https://i.imgur.com/CSHlsF7.png"/> <figcaption>
            <h4>Add openCVLibrary340</h4>
        </figcaption>
</figure>


<h2 id="cấu-hình-cmake-và-ndk">Cấu hình CMAKE và NDK</h2>

<p>Để CMAKE có thể nhận ra được OpenCV, ta thêm đoạn code sau vào trong <code>CMakeLists.txt</code></p>

<ol>
<li>Thêm thư viện:</li>
</ol>

<pre><code>include_directories(/path/to/OpenCV4Android/sdk/native/jni/include)
add_library( lib_opencv SHARED IMPORTED )
set_target_properties(lib_opencv PROPERTIES IMPORTED_LOCATION /path/to/OpenCV4Android/sdk/native/libs/${ANDROID_ABI}/libopencv_java3.so)
</code></pre>

<ol>
<li>Thêm <code>lib_opencv</code> vào tham số của <code>target_link_libraries</code> ( câu lệnh cuối cùng
trong <code>CMakeLists.txt</code>).</li>
</ol>

<p>Lưu ý rằng Cmake sử dụng <code>/</code> cho đường dẫn trong cả Windows và Linux.</p>

<h2 id="cấu-hình-gradle">Cấu hình Gradle</h2>

<ol>
<li><p>Thêm <code>abiFilters 'x86', 'x86_64', 'armeabi', 'armeabi-v7a', 'arm64-v8a', 'mips', 'mips64'</code>
vào <code>cmake</code>.</p></li>

<li><p>Đặt đoạn code sau vào bên trong phần <code>android</code>:</p></li>
</ol>

<pre><code>sourceSets {
    main {
        jni.srcDirs = ['src/main/cpp']
        jniLibs.srcDirs = ['\path\to\OpenCV-android-sdk\\sdk\\native\\libs']
    }

}
</code></pre>

<p>Build lại ứng dụng và coi như ta đã config xong. Trong các bài viết tới, mình
sẽ giới thiệu một số kỹ thuật OpenCV với Android:</p>

<ul>
<li>Trao đổi đối tượng Mat giữa Java và NDK.</li>
<li>Tổ chức dự án và mã nguồn.</li>
</ul>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'>
  <div class='tags'>
  <span class='taxonomy-icon'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>
</span>
  <span class='screen-reader-text'>Tags: </span><a class='tag' href='/vi/tags/android'>android</a>, <a class='tag' href='/vi/tags/opencv'>opencv</a>, <a class='tag' href='/vi/tags/programming'>programming</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/vi/docs/story_telling_witcher3/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>Witcher 3: xây dựng nhân vật và phương pháp phát triển cốt truyện</a>
    </div><div class='next-entry sep-before'>
      <a href='/vi/docs/overfitting/'>
        <span class='screen-reader-text'>Next post: </span>Overfitting là cái quái gì<span aria-hidden='true'>Next <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>




      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><div class='copyright'>
  <p>&amp;copy; 2017 Dang-Khoa</p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__public_path__='http:\/\/dangkhoasdc.github.io\/assets\/js\/'</script>

<script src='http://dangkhoasdc.github.io/assets/js/main.68cb493a.js'></script><script type='text/x-mathjax-config'>
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"processEscapes":true}})
</script>

<script type='text/javascript' async src='//unpkg.com/mathjax/MathJax.js?config=TeX-MML-AM_CHTML'></script>





</body>

</html>






















