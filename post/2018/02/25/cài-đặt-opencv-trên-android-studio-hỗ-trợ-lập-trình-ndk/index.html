<!DOCTYPE html>
<html
  lang="vi"
  prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"
>
  <head>
    <meta charset="utf-8" />

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />
<meta name="viewport" content="width=device-width, initial-scale=1" />


<link rel="apple-touch-icon" sizes="180x180" href="http://dangkhoasdc.github.io//apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://dangkhoasdc.github.io//favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://dangkhoasdc.github.io//favicon-16x16.png">
<link rel="manifest" href="http://dangkhoasdc.github.io//site.webmanifest">
<link rel="mask-icon" href="http://dangkhoasdc.github.io//safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">



<meta name="keywords" content="android,
opencv,
programming,
">

<meta property="og:title" content="Cài đặt OpenCV trên Android Studio hỗ trợ lập trình NDK" />
<meta property="og:description" content="Trong bài viết này, mình sẽ trình bày cách cấu hình thư viện OpenCV với IDE Android Studio phiên bản mới nhất (3.0.1). Phiên bản được biên dịch sẵn có hỗ trợ Android được cung cấp sẵn ở OpenCV Homepage. Tải và extract thư viện. Đồng thời, để có thể debug trên thiết bị thực thì điện thoại phải cài đặt ứng dụng OpenCV Manager.
Trong bài viết khác, mình sẽ hướng dẫn cách biên dịch phiên bản OpenCV với các tùy chỉnh của riêng cho từng yêu cầu, ví dụ như sử dụng đặc trưng SIFT hoặc các thuật toán có bản quyền." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://dangkhoasdc.github.io/post/2018/02/25/c%C3%A0i-%C4%91%E1%BA%B7t-opencv-tr%C3%AAn-android-studio-h%E1%BB%97-tr%E1%BB%A3-l%E1%BA%ADp-tr%C3%ACnh-ndk/" />
<meta property="article:published_time" content="2018-02-25T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-02-25T00:00:00+00:00" /><meta property="og:site_name" content="Blog" />

<meta property="og:site_name" content="Blog" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Cài đặt OpenCV trên Android Studio hỗ trợ lập trình NDK"/>
<meta name="twitter:description" content="Trong bài viết này, mình sẽ trình bày cách cấu hình thư viện OpenCV với IDE Android Studio phiên bản mới nhất (3.0.1). Phiên bản được biên dịch sẵn có hỗ trợ Android được cung cấp sẵn ở OpenCV Homepage. Tải và extract thư viện. Đồng thời, để có thể debug trên thiết bị thực thì điện thoại phải cài đặt ứng dụng OpenCV Manager.
Trong bài viết khác, mình sẽ hướng dẫn cách biên dịch phiên bản OpenCV với các tùy chỉnh của riêng cho từng yêu cầu, ví dụ như sử dụng đặc trưng SIFT hoặc các thuật toán có bản quyền."/>


<meta itemprop="name" content="Cài đặt OpenCV trên Android Studio hỗ trợ lập trình NDK">
<meta itemprop="description" content="Trong bài viết này, mình sẽ trình bày cách cấu hình thư viện OpenCV với IDE Android Studio phiên bản mới nhất (3.0.1). Phiên bản được biên dịch sẵn có hỗ trợ Android được cung cấp sẵn ở OpenCV Homepage. Tải và extract thư viện. Đồng thời, để có thể debug trên thiết bị thực thì điện thoại phải cài đặt ứng dụng OpenCV Manager.
Trong bài viết khác, mình sẽ hướng dẫn cách biên dịch phiên bản OpenCV với các tùy chỉnh của riêng cho từng yêu cầu, ví dụ như sử dụng đặc trưng SIFT hoặc các thuật toán có bản quyền.">
<meta itemprop="datePublished" content="2018-02-25T00:00:00+00:00" />
<meta itemprop="dateModified" content="2018-02-25T00:00:00+00:00" />
<meta itemprop="wordCount" content="371">



<meta itemprop="keywords" content="android,opencv,programming," />



    <title>Cài đặt OpenCV trên Android Studio hỗ trợ lập trình NDK || Blog</title>
    <link rel="canonical" href="http://dangkhoasdc.github.io/post/2018/02/25/c%C3%A0i-%C4%91%E1%BA%B7t-opencv-tr%C3%AAn-android-studio-h%E1%BB%97-tr%E1%BB%A3-l%E1%BA%ADp-tr%C3%ACnh-ndk/" />

    

    <link rel="stylesheet" href="/css/reboot.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="stylesheet" href="/css/syntax.css" />



<script type="text/javascript" src="/js/main.js" defer></script>

<link href="https://fonts.googleapis.com/css?family=Lora&display=swap" rel="stylesheet">

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  </head>
  <body
  class=" look-sheet-bkg"
  lang="vi">
  <div class="nav-bkg">
    <nav class="content-container pagewide-bar-padding">
      <span class="divider">/ </span>
      <a href="http://dangkhoasdc.github.io/" >Blog</a>
      <span class="divider">/ </span>
  <a href="http://dangkhoasdc.github.io/post">Posts</a>
      <ul class="list-unstyled right-links">

          <li>
            <a href="/en/post/">
              <span class="post-title">English version</span>
            </a>
          </li>

</ul>

    </nav>
  </div>
  <article
    id="main"
    class="content-container look-sheet article-pad-v "
    itemscope
    itemtype="https://schema.org/Article" >
  <meta itemprop="author" content="" />
  <meta itemprop="publisher" content="" />
  <meta itemprop="image" content="" />
  <h1 itemprop="name" id="title">Cài đặt OpenCV trên Android Studio hỗ trợ lập trình NDK</h1>
  <meta itemprop="headline" content="Cài đặt OpenCV trên Android Studio hỗ trợ lập trình NDK" />
  
  <div class="post-tags">
  
    <a href="http://dangkhoasdc.github.io/tags/android/">#android</a>&nbsp;
  
    <a href="http://dangkhoasdc.github.io/tags/opencv/">#opencv</a>&nbsp;
  
    <a href="http://dangkhoasdc.github.io/tags/programming/">#programming</a>&nbsp;
  
  </div>
  
  
    
      <div class="post-date"><span itemprop="datePublished">February 25, 2018</span></div>
      <meta itemprop="dateModified" content="February 25, 2018"/>
    
  
  
  <div itemprop="articleBody" id="content" class="article-body margin-top-2em">
    <p>Trong bài viết này, mình sẽ trình bày cách cấu hình thư viện OpenCV với IDE
Android Studio phiên bản mới nhất (3.0.1). Phiên bản được biên dịch sẵn có
hỗ trợ Android được cung cấp sẵn ở <a href="https://opencv.org/releases.html">OpenCV Homepage</a>.
Tải và extract thư viện. Đồng thời, để có thể debug trên thiết bị thực thì
điện thoại phải cài đặt ứng dụng <a href="https://play.google.com/store/apps/details?id=org.opencv.engine&amp;hl=en">OpenCV Manager</a>.</p>
<p>Trong bài viết khác, mình sẽ hướng dẫn cách biên dịch phiên bản OpenCV với
các tùy chỉnh của riêng cho từng yêu cầu, ví dụ như sử dụng đặc trưng SIFT hoặc
các thuật toán có bản quyền.</p>
<h2 id="tạo-ứng-dụng-android-với-hỗ-trợ-ndk">Tạo ứng dụng Android với hỗ trợ NDK</h2>
<p>Trong menu, <code>File-&gt;New-&gt;New Project</code>, và chọn <code>Include C++ support</code> trong cửa
sổ <code>Create New Project</code>.</p>
<figure>
    <img src="https://i.imgur.com/vgMNEYg.png"/> <figcaption>
            <h4>Step 1</h4>
        </figcaption>
</figure>

<p>Hai bước tiếp theo tương tự như cấu hình ứng dụng thông thường, nên mình sẽ bỏ
qua phần này. Sau đó, IDE sẽ hỏi cấu hình C++ cho ứng dụng, thoe mình thì nên
chọn C++14 và 2 tùy chọn Exception Support và  Runtime Type
Information Support.</p>
<ol>
<li>
<p>Từ cửa sổ Project Structure (<code>File -&gt; Project Structure</code>), ta thêm OpenCV module
bằng cách click vào dấu <code>+</code>, chọn <code>Import Eclipse ADT Project</code>
và trỏ đến thư mục <code>/path/to/OpenCV4Android/sdk/java</code>.</p>
</li>
<li>
<p>Chọn <code>Modules -&gt; app</code>.  Trong tab <code>Dependencies</code> , thêm OpenCV module
bằng cách nhấn vào dấu <code>+</code></p>
<ol>
<li><code>Module Dependency</code>.</li>
<li>Chọn <code>:openCVLibrary340</code>.</li>
</ol>
</li>
</ol>
<figure>
    <img src="https://i.imgur.com/CSHlsF7.png"/> <figcaption>
            <h4>Add openCVLibrary340</h4>
        </figcaption>
</figure>

<h2 id="cấu-hình-cmake-và-ndk">Cấu hình CMAKE và NDK</h2>
<p>Để CMAKE có thể nhận ra được OpenCV, ta thêm đoạn code sau vào trong <code>CMakeLists.txt</code></p>
<ol>
<li>Thêm thư viện:</li>
</ol>
<pre><code>include_directories(/path/to/OpenCV4Android/sdk/native/jni/include)
add_library( lib_opencv SHARED IMPORTED )
set_target_properties(lib_opencv PROPERTIES IMPORTED_LOCATION /path/to/OpenCV4Android/sdk/native/libs/${ANDROID_ABI}/libopencv_java3.so)
</code></pre><ol start="2">
<li>Thêm <code>lib_opencv</code> vào tham số của <code>target_link_libraries</code> ( câu lệnh cuối cùng
trong <code>CMakeLists.txt</code>).</li>
</ol>
<p>Lưu ý rằng Cmake sử dụng <code>/</code> cho đường dẫn trong cả Windows và Linux.</p>
<h2 id="cấu-hình-gradle">Cấu hình Gradle</h2>
<ol>
<li>
<p>Thêm <code>abiFilters 'x86', 'x86_64', 'armeabi', 'armeabi-v7a', 'arm64-v8a', 'mips', 'mips64'</code>
vào <code>cmake</code>.</p>
</li>
<li>
<p>Đặt đoạn code sau vào bên trong phần <code>android</code>:</p>
</li>
</ol>
<pre><code>sourceSets {
    main {
        jni.srcDirs = ['src/main/cpp']
        jniLibs.srcDirs = ['\path\to\OpenCV-android-sdk\\sdk\\native\\libs']
    }

}
</code></pre><p>Build lại ứng dụng và coi như ta đã config xong. Trong các bài viết tới, mình
sẽ giới thiệu một số kỹ thuật OpenCV với Android:</p>
<ul>
<li>Trao đổi đối tượng Mat giữa Java và NDK.</li>
<li>Tổ chức dự án và mã nguồn.</li>
</ul>

  </div>
</article>

  


  
    <div class="nav-bkg-50 content-container-narrow-pad bottom-links text-0p75">
      <nav class="flex-row">
      
      <a href="http://dangkhoasdc.github.io/post/2018/02/13/witcher-3-x%C3%A2y-d%E1%BB%B1ng-nh%C3%A2n-v%E1%BA%ADt-v%C3%A0-ph%C6%B0%C6%A1ng-ph%C3%A1p-ph%C3%A1t-tri%E1%BB%83n-c%E1%BB%91t-truy%E1%BB%87n/" class="flex-row v-center no-underline"  style="max-width:45%;">
        <span class="text-1p5">←</span>&nbsp;<span class="re-underline">Previous: Witcher 3: xây dựng nhân vật và phương pháp phát triển cốt truyện</span>
      </a>
      
      
        <a href="http://dangkhoasdc.github.io/post/2018/03/29/overfitting-l%C3%A0-c%C3%A1i-qu%C3%A1i-g%C3%AC/" class="flex-row v-center no-underline" style="max-width: 45%;">
        <span class="re-underline">Next: Overfitting là cái quái gì</span>&nbsp;<span class="text-1p5">→</span>
        </a>
      
      </nav>
    </div>
  
  <footer>
    </footer>
    </body>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
onload='renderMathInElement(document.body,{
  delimiters: [
      {left: "$$", right: "$$", display: true},
      {left: "\\[", right: "\\]", display: true},
      {left: "$", right: "$", display: false},
      {left: "\\(", right: "\\)", display: false}
  ]});'></script>

  </html>
  

  </body>
</html>
