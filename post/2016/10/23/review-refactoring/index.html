<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Review Refactoring | My blog</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/logs/">Logs</a></li>
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/index.xml">Subscribe</a></li>
      
      

    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Review Refactoring</span></h1>

<h2 class="date">2016/10/23</h2>
</div>

<main>


<p>Mình quyết định đọc cuốn <a href="https://www.amazon.com/Refactoring-Improving-Design-Existing-Code/dp/0201485672">Refactoring: Improving the Design of Existing Code</a> sau khi đọc xong cuốn <em>Design Pattern</em>.</p>

<h1 id="sơ-lược">Sơ lược</h1>

<p><img src="http://d.gr-assets.com/books/1386925632l/44936.jpg" alt="Refactoring: Improving the Design of Existing Code" /></p>

<p>Mặc dù đã được nghe đến khái niệm này rất nhiều lần, tuy nhiên sau khi đọc xong cuốn sách, đối chiếu với những trải nghiệm của bản thân về các project trước đây. Mình hiểu:</p>

<blockquote>
<p>Refactor là quá trình thao tác trên mã nguồn có sẵn nhằm gia tăng chất lượng mã nguồn nhưng vẫn giữ lại được các ràng buộc của hệ thống.</p>
</blockquote>

<p>Như vậy, <em>refactor</em> không phải quá trình tạo mới hoàn toàn một dự án hay một hệ thống nào cả, mà nhằm làm tăng <em>chất lượng</em> của mã nguồn đó. <em>Chất lượng</em> ở đây được đánh giá trên các độ đo khác nhau:</p>

<ol>
<li>Khả năng mở rộng của mã nguồn.</li>
<li>Khả năng dễ đọc và tìm lỗi.</li>
<li>Khả năng thích ứng với lỗi (tính robustness)</li>
<li>Hiệu suất của hệ thống.</li>
</ol>

<p>Ngoài việc làm gia tăng chất lượng của hệ thống, bên cạnh đó <em>refactor</em> phải đảm bảo giữ lại được các ràng buộc mà trước đó hệ thống đã có. Ví dụ như:</p>

<ol>
<li>Những APIs đã được phát hành của hệ thống, ta không nên <em>refactor</em> và thay đổi luôn các APIs đó.</li>
<li>Những <em>class</em>, <em>functions</em> liên hệ trực tiếp đến các modules khác trong hệ thống lớn hơn.</li>
</ol>

<h1 id="những-kĩ-thuật-trong-refactor">Những kĩ thuật trong refactor</h1>

<p>Một phần quan trọng của cuốn sách không chỉ nói về định nghĩa của <em>refactor</em> mà còn đề cập đến lí do vì sao cần <em>refactor</em>, khi nào nên <em>refactor</em>, những tác động nào ảnh hưởng đến quá trình <em>refactor</em>, và đặc biệt là <em>xây dựng bộ test cho hệ thống</em>. Trước giờ mình chủ yếu làm các hệ thống trong academic, việc xây dựng các bộ test không được chú trọng quá nhiều. Nhưng thực sự đọc xong cuốn sách mình nghĩ mình nên tập các viết các bộ test trước khi viết một function nào đó. Việc <em>tự tay</em> viết các bộ test mang lại khá nhiều thuận lợi:</p>

<ol>
<li>Giúp người thiết kế biết được giao diện tương tác API mà function mình đảm nhiệm.</li>
<li>Hiểu được các ràng buộc về Input/Output và tham số.</li>
<li>Thuận lợi cho việc refactor, các bộ test sẽ giúp ta kiểm tra xem việc vừa refactor xong có ảnh hưởng gì đến hệ thống hiện có không.</li>
<li>Hình thành được outline của hệ thống trong quá trình xây dựng bộ test.</li>
</ol>

<p>Cuốn sách được bố cục phần nào giống với bên <em>Design Pattern</em>, cung cấp một lượng lớn <em>từ vựng</em> về các kĩ thuật refactor. Với mỗi kĩ thuật được đề cập, tác giả nêu lên: động lực sử dụng, ví dụ minh họa, các lưu ý. Các kĩ thuật refactor được chia thành các category</p>

<ul>
<li>Thao tác trên các method trong 1 class.</li>
<li>Thao tác trên các method giữa các class với nhau.</li>
<li>Tổ chức dữ liệu.</li>
<li>Đơn giản hóa các câu lệnh điều kiện.</li>
<li>Đơn giản hóa các hàm.</li>
<li>Tái tổ chức hệ thống class.</li>
</ul>

<p>Cuối cùng là những thao tác refactor ảnh hưởng đến các ràng buộc của hệ thống, đây là những thao tác sẽ ảnh hưởng lên đến việc tương tác giữa các hệ thống với nhau nên cần suy nghĩ cẩn trọng trước khi thực hiện.</p>

<p>Phần cuối cùng là các công cụ refactor, mình nghĩ phần nào không cần nói nhiều vì trên các IDE nổi tiếng như <em>Visual Studio</em>, <em>Eclipse</em>, <em>IntelIJ</em> thì các kĩ thuật refactor đã trở thành những tính năng khá quen thuộc. Việc refactor tự động giúp tránh xảy ra lỗi và giảm thời gian cho công việc này khá nhiều.</p>

<blockquote>
<p>Nếu có hành động nào đó lặp đi lặp lại trên 5 lần. Tốt hơn là ta nên làm cách khiến nó thành tự động.</p>
</blockquote>

<h1 id="bình-luận">Bình luận</h1>

<p>Đây là cuốn sách cuối cùng mình đọc liên quan đến công nghệ phần mềm trước khi đến với phần thử thách với mình nhiều hơn: Machine Learning và Computer Vision.</p>

<p>Cuốn sách đặc biệt phù hợp với các bạn sinh viên năm 3, 4 sau khi đã học về lập trình hướng đối tượng cũng như đã trải qua một thời gian tiếp xúc với những mã nguồn, dự án có sẵn. Thời gian đọc có lẽ mất từ 5-7 ngày.</p>

<p>Điều thú vị khi mình đọc đó là cảm giác:</p>

<blockquote>
<p>wtf?? đổi tên biến cũng được gọi là refactor wtf?? đổi tên hàm cũng vậy …</p>
</blockquote>

<p>Mình nghiệm ra, refactor không phải là cái gì đó quá cao siêu, có lẽ bạn nào lập trình cũng đã từng thực hiện một lần. Nhưng refactor như thế nào hiệu quả, tốn ít thời gian và công sức và hơn hết là biết cách refactor là một chuyện khác.</p>

<p><em>Refactoring</em> là cuốn sách sẽ giải đáp những điều đó.</p>

<h1 id="future-works">Future Works</h1>

<p>Mình đã đọc xong cuốn <em>Design Patterns</em> nhưng chưa biết review thế nào. Có lẽ cần nhiều thời gian hơn để có thể viết về các mẫu. Nhưng có lẽ mình không tập trung nhiều thời gian.</p>

<p>Kế hoạch sắp đến: <em>Pattern Recognition and Machine Learning</em>.</p>

</main>

  <footer>
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
onload='renderMathInElement(document.body,{
  delimiters: [
      {left: "$$", right: "$$", display: true},
      {left: "\\[", right: "\\]", display: true},
      {left: "$", right: "$", display: false},
      {left: "\\(", right: "\\)", display: false}
  ]});'></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-2381283-3', 'auto');
	
	ga('send', 'pageview');
}
</script>

<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "httpdangkhoasdcgithubio" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

  
  <hr/>
  &copy; <a href="https://dkhoa.dev">Dang-Khoa</a> 2017 &ndash; 2019 | <a href="https://github.com/dangkhoasdc">Github</a> | <a href="https://twitter.com/dksdc">Twitter</a>
  
  </footer>
  </body>
</html>

