<!DOCTYPE html>
<html
  lang="vi"
  prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"
>
  <head>
    <meta charset="utf-8" />

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />
<meta name="viewport" content="width=device-width, initial-scale=1" />


<link rel="apple-touch-icon" sizes="180x180" href="http://dangkhoasdc.github.io//apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://dangkhoasdc.github.io//favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://dangkhoasdc.github.io//favicon-16x16.png">
<link rel="manifest" href="http://dangkhoasdc.github.io//site.webmanifest">
<link rel="mask-icon" href="http://dangkhoasdc.github.io//safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">



<meta name="keywords" content="android,
opencv,
programming,
">

<meta property="og:title" content="Setup OpenCV and Android Studio with NDK support" />
<meta property="og:description" content="In this tutorial, I will demonstrate how to configurate the renowned computer vision libary, OpenCV, with the current Android Studio version (3.0.1). Let get started. The compiled version of OpenCV which supports Android is available at OpenCV Homepage. Download and extract it. Please note that to test the application properly on the mobile devices, the OpenCV Manager has to be installed.
In another tutorial, I will talk about how to compile our own OpenCV library and put it to Android Studio since the pre-compiled library misses some interesting and important components, e." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://dangkhoasdc.github.io/en/post/2018/02/25/setup-opencv-and-android-studio-with-ndk-support/" />
<meta property="article:published_time" content="2018-02-25T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-02-25T00:00:00+00:00" /><meta property="og:site_name" content="Dang-Khoa&#39;s blog" />

<meta property="og:site_name" content="Dang-Khoa&#39;s blog" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Setup OpenCV and Android Studio with NDK support"/>
<meta name="twitter:description" content="In this tutorial, I will demonstrate how to configurate the renowned computer vision libary, OpenCV, with the current Android Studio version (3.0.1). Let get started. The compiled version of OpenCV which supports Android is available at OpenCV Homepage. Download and extract it. Please note that to test the application properly on the mobile devices, the OpenCV Manager has to be installed.
In another tutorial, I will talk about how to compile our own OpenCV library and put it to Android Studio since the pre-compiled library misses some interesting and important components, e."/>


<meta itemprop="name" content="Setup OpenCV and Android Studio with NDK support">
<meta itemprop="description" content="In this tutorial, I will demonstrate how to configurate the renowned computer vision libary, OpenCV, with the current Android Studio version (3.0.1). Let get started. The compiled version of OpenCV which supports Android is available at OpenCV Homepage. Download and extract it. Please note that to test the application properly on the mobile devices, the OpenCV Manager has to be installed.
In another tutorial, I will talk about how to compile our own OpenCV library and put it to Android Studio since the pre-compiled library misses some interesting and important components, e.">
<meta itemprop="datePublished" content="2018-02-25T00:00:00+00:00" />
<meta itemprop="dateModified" content="2018-02-25T00:00:00+00:00" />
<meta itemprop="wordCount" content="357">



<meta itemprop="keywords" content="android,opencv,programming," />



    <title>Setup OpenCV and Android Studio with NDK support || Dang-Khoa&#39;s blog</title>
    <link rel="canonical" href="http://dangkhoasdc.github.io/en/post/2018/02/25/setup-opencv-and-android-studio-with-ndk-support/" />

    

    <link rel="stylesheet" href="/css/reboot.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="stylesheet" href="/css/syntax.css" />



<script type="text/javascript" src="/js/main.js" defer></script>

<link href="https://fonts.googleapis.com/css?family=Lora&display=swap" rel="stylesheet">

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  </head>
  <body
  class=" look-sheet-bkg"
  lang="vi">
  <div class="nav-bkg">
    <nav class="content-container pagewide-bar-padding">
      <span class="divider">/ </span>
      <a href="http://dangkhoasdc.github.io/" >Dang-Khoa&#39;s blog</a>
      <span class="divider">/ </span>
  <a href="http://dangkhoasdc.github.io/post">Posts</a>
      <ul class="list-unstyled right-links">

          <li>
            <a href="/en/post/">
              <span class="post-title">English version</span>
            </a>
          </li>

</ul>

    </nav>
  </div>
  <article
    id="main"
    class="content-container look-sheet article-pad-v "
    itemscope
    itemtype="https://schema.org/Article" >
  <meta itemprop="author" content="" />
  <meta itemprop="publisher" content="" />
  <meta itemprop="image" content="" />
  <h1 itemprop="name" id="title">Setup OpenCV and Android Studio with NDK support</h1>
  <meta itemprop="headline" content="Setup OpenCV and Android Studio with NDK support" />
  
  <div class="post-tags">
  
    <a href="http://dangkhoasdc.github.io/en/tags/android/">#android</a>&nbsp;
  
    <a href="http://dangkhoasdc.github.io/en/tags/opencv/">#opencv</a>&nbsp;
  
    <a href="http://dangkhoasdc.github.io/en/tags/programming/">#programming</a>&nbsp;
  
  </div>
  
  
    
      <div class="post-date"><span itemprop="datePublished">February 25, 2018</span></div>
      <meta itemprop="dateModified" content="February 25, 2018"/>
    
  
  
  <div itemprop="articleBody" id="content" class="article-body margin-top-2em">
    <p>In this tutorial, I will demonstrate how to configurate the renowned computer
vision libary, OpenCV, with the current Android Studio version (3.0.1). Let get started.
The compiled version of OpenCV which supports Android is available at <a href="https://opencv.org/releases.html">OpenCV Homepage</a>. Download
and extract it. Please note that to test the application properly on the mobile
devices, the <a href="https://play.google.com/store/apps/details?id=org.opencv.engine&amp;hl=en">OpenCV Manager</a> has to be installed.</p>
<p>In another tutorial, I will talk about how to compile our own OpenCV library
and put it to Android Studio since the pre-compiled library misses some
interesting and important components, e.g, the SIFT features and other licensed
algorithms.</p>
<h2 id="creating-a-new-android-project-with-ndk-support">Creating a new Android project with NDK support</h2>
<p>From the menu, select <code>File-&gt;New-&gt;New Project</code> and select <code>Include C++ support</code>
in the Create New Project dialog.</p>
<figure>
    <img src="https://i.imgur.com/vgMNEYg.png"/> <figcaption>
            <h4>Step 1</h4>
        </figcaption>
</figure>

<p>The next two steps are similar to the setup for normal applications, so I skip
it. Later, the IDE asks the C++ settings for the project, I prefer C++14 over
C++11 and also add two options, namely Exception Support and Runtime Type
Information Support, for the project.</p>
<ol>
<li>
<p>From the Project Structure windows (<code>File -&gt; Project Structure</code>), we add the
OpenCV module by clicking on the plus sign, selecting the <code>Import Eclipse ADT Project</code>
and pointing to the <code>/path/to/OpenCV4Android/sdk/java</code> directory.</p>
</li>
<li>
<p>Select <code>Modules -&gt; app</code>.  In the <code>Dependencies</code> tab, add the OpenCV module
by selecting the plus sign.</p>
<ol>
<li><code>Module Dependency</code>.</li>
<li>Select <code>:openCVLibrary340</code>.</li>
</ol>
</li>
</ol>
<figure>
    <img src="https://i.imgur.com/CSHlsF7.png"/> <figcaption>
            <h4>Add openCVLibrary340</h4>
        </figcaption>
</figure>

<h2 id="configurate-cmake-and-ndk">Configurate CMAKE and NDK</h2>
<p>In order to get CMAKE properly detect OpenCV, we add the following configuration
to CMAKELists.txt:</p>
<ol>
<li>Add a new library:</li>
</ol>
<pre><code>include_directories(/path/to/OpenCV4Android/sdk/native/jni/include)
add_library( lib_opencv SHARED IMPORTED )
set_target_properties(lib_opencv PROPERTIES IMPORTED_LOCATION /path/to/OpenCV4Android/sdk/native/libs/${ANDROID_ABI}/libopencv_java3.so)
</code></pre><ol start="2">
<li>Put <code>lib_opencv</code> to the arguments of <code>target_link_libraries</code> (the last command
in <code>CMakeLists.txt</code>).</li>
</ol>
<p>Beware that the path in CMAKE use <code>/</code> in both Windows and Linux.</p>
<h2 id="configurate-gradle">Configurate Gradle</h2>
<ol>
<li>
<p>Put <code>abiFilters 'x86', 'x86_64', 'armeabi', 'armeabi-v7a', 'arm64-v8a', 'mips', 'mips64'</code>
in the <code>cmake</code> setting.</p>
</li>
<li>
<p>Put the following text inside <code>android</code>:</p>
</li>
</ol>
<pre><code>sourceSets {
    main {
        jni.srcDirs = ['src/main/cpp']
        jniLibs.srcDirs = ['\path\to\OpenCV-android-sdk\\sdk\\native\\libs']
    }

}
</code></pre><p>Build the project again and we are done. In the the couple tutorials I will
demonstate several techniques to manipulate the libary on Android:</p>
<ul>
<li>Transfer OpenCV MAT from Android to NDK code.</li>
<li>
<table>
<thead>
<tr>
<th>Organize the project and source code.</th>
</tr>
</thead>
</table>
</li>
</ul>

  </div>
</article>

  


  
    <div class="nav-bkg-50 content-container-narrow-pad bottom-links text-0p75">
      <nav class="flex-row">
      
      <a href="http://dangkhoasdc.github.io/en/post/2018/02/07/programming-pearls/" class="flex-row v-center no-underline"  style="max-width:45%;">
        <span class="text-1p5">←</span>&nbsp;<span class="re-underline">Previous: Programming Pearls</span>
      </a>
      
      
        <a href="http://dangkhoasdc.github.io/en/post/2018/03/08/opencv-on-android-practices-and-tips/" class="flex-row v-center no-underline" style="max-width: 45%;">
        <span class="re-underline">Next: OpenCV on Android: practices and tips</span>&nbsp;<span class="text-1p5">→</span>
        </a>
      
      </nav>
    </div>
  
  <footer>
    </footer>
    </body>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
onload='renderMathInElement(document.body,{
  delimiters: [
      {left: "$$", right: "$$", display: true},
      {left: "\\[", right: "\\]", display: true},
      {left: "$", right: "$", display: false},
      {left: "\\(", right: "\\)", display: false}
  ]});'></script>

  </html>
  

  </body>
</html>
